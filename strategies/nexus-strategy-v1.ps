// © 2025 Nexus Macro Strategy
// @version=6
strategy("Nexus Strategy V1", overlay=true, initial_capital=10000)

lookback = input.int(100, "Bakılacak Bar")
rr = input.float(1.5, "Risk/Ödül")

h_high = ta.highest(high, lookback)
l_low = ta.lowest(low, lookback)

if ta.change(h_high) > 0
    float entry = h_high - ta.atr(14)
    strategy.entry("Short", strategy.short, limit=entry)
    strategy.exit("Exit", "Short", stop=h_high, limit=entry - (ta.atr(14) * rr))

if ta.change(l_low) < 0
    float entry = l_low + ta.atr(14)
    strategy.entry("Long", strategy.long, limit=entry)
    strategy.exit("Exit", "Long", stop=l_low, limit=entry + (ta.atr(14) * rr))
