// © 2025 Nexus Macro Trader (Pro Edition - Anti-Repaint)
// @version=6
indicator("Nexus Macro Pro", overlay=true, max_lines_count=500, max_labels_count=500)

int p_len = input.int(10, "Pivot Onay Barı")
float rr = input.float(2.0, "Risk/Ödül")

ph = ta.pivothigh(high, p_len, p_len)
pl = ta.pivotlow(low, p_len, p_len)

if not na(ph)
    atr = ta.atr(14)
    tp = ph - (atr * rr)
    line.new(bar_index[p_len], ph, bar_index, ph, color=color.red, width=2)
    label.new(bar_index[p_len], ph, "SHORT", color=color.red, textcolor=color.white)

if not na(pl)
    atr = ta.atr(14)
    tp = pl + (atr * rr)
    line.new(bar_index[p_len], pl, bar_index, pl, color=color.blue, width=2)
    label.new(bar_index[p_len], pl, "LONG", color=color.blue, textcolor=color.white)
